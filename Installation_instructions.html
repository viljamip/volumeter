<!DOCTYPE html><html><head><meta charset="utf-8"><title>README.md</title><style>.markdown-body hr:after,.markdown-body hr:before{display:table;content:""}.markdown-body ol,.markdown-body td,.markdown-body th,.markdown-body ul{padding:0}@font-face{font-family:octicons-anchor;src:url(data:font/woff;charset=utf-8;base64,d09GRgABAAAAAAYcAA0AAAAACjQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABGRlRNAAABMAAAABwAAAAca8vGTk9TLzIAAAFMAAAARAAAAFZG1VHVY21hcAAAAZAAAAA+AAABQgAP9AdjdnQgAAAB0AAAAAQAAAAEACICiGdhc3AAAAHUAAAACAAAAAj//wADZ2x5ZgAAAdwAAADRAAABEKyikaNoZWFkAAACsAAAAC0AAAA2AtXoA2hoZWEAAALgAAAAHAAAACQHngNFaG10eAAAAvwAAAAQAAAAEAwAACJsb2NhAAADDAAAAAoAAAAKALIAVG1heHAAAAMYAAAAHwAAACABEAB2bmFtZQAAAzgAAALBAAAFu3I9x/Nwb3N0AAAF/AAAAB0AAAAvaoFvbwAAAAEAAAAAzBdyYwAAAADP2IQvAAAAAM/bz7t4nGNgZGFgnMDAysDB1Ml0hoGBoR9CM75mMGLkYGBgYmBlZsAKAtJcUxgcPsR8iGF2+O/AEMPsznAYKMwIkgMA5REMOXicY2BgYGaAYBkGRgYQsAHyGMF8FgYFIM0ChED+h5j//yEk/3KoSgZGNgYYk4GRCUgwMaACRoZhDwCs7QgGAAAAIgKIAAAAAf//AAJ4nHWMMQrCQBBF/0zWrCCIKUQsTDCL2EXMohYGSSmorScInsRGL2DOYJe0Ntp7BK+gJ1BxF1stZvjz/v8DRghQzEc4kIgKwiAppcA9LtzKLSkdNhKFY3HF4lK69ExKslx7Xa+vPRVS43G98vG1DnkDMIBUgFN0MDXflU8tbaZOUkXUH0+U27RoRpOIyCKjbMCVejwypzJJG4jIwb43rfl6wbwanocrJm9XFYfskuVC5K/TPyczNU7b84CXcbxks1Un6H6tLH9vf2LRnn8Ax7A5WQAAAHicY2BkYGAA4teL1+yI57f5ysDNwgAC529f0kOmWRiYVgEpDgYmEA8AUzEKsQAAAHicY2BkYGB2+O/AEMPCAAJAkpEBFbAAADgKAe0EAAAiAAAAAAQAAAAEAAAAAAAAKgAqACoAiAAAeJxjYGRgYGBhsGFgYgABEMkFhAwM/xn0QAIAD6YBhwB4nI1Ty07cMBS9QwKlQapQW3VXySvEqDCZGbGaHULiIQ1FKgjWMxknMfLEke2A+IJu+wntrt/QbVf9gG75jK577Lg8K1qQPCfnnnt8fX1NRC/pmjrk/zprC+8D7tBy9DHgBXoWfQ44Av8t4Bj4Z8CLtBL9CniJluPXASf0Lm4CXqFX8Q84dOLnMB17N4c7tBo1AS/Qi+hTwBH4rwHHwN8DXqQ30XXAS7QaLwSc0Gn8NuAVWou/gFmnjLrEaEh9GmDdDGgL3B4JsrRPDU2hTOiMSuJUIdKQQayiAth69r6akSSFqIJuA19TrzCIaY8sIoxyrNIrL//pw7A2iMygkX5vDj+G+kuoLdX4GlGK/8Lnlz6/h9MpmoO9rafrz7ILXEHHaAx95s9lsI7AHNMBWEZHULnfAXwG9/ZqdzLI08iuwRloXE8kfhXYAvE23+23DU3t626rbs8/8adv+9DWknsHp3E17oCf+Z48rvEQNZ78paYM38qfk3v/u3l3u3GXN2Dmvmvpf1Srwk3pB/VSsp512bA/GG5i2WJ7wu430yQ5K3nFGiOqgtmSB5pJVSizwaacmUZzZhXLlZTq8qGGFY2YcSkqbth6aW1tRmlaCFs2016m5qn36SbJrqosG4uMV4aP2PHBmB3tjtmgN2izkGQyLWprekbIntJFing32a5rKWCN/SdSoga45EJykyQ7asZvHQ8PTm6cslIpwyeyjbVltNikc2HTR7YKh9LBl9DADC0U/jLcBZDKrMhUBfQBvXRzLtFtjU9eNHKin0x5InTqb8lNpfKv1s1xHzTXRqgKzek/mb7nB8RZTCDhGEX3kK/8Q75AmUM/eLkfA+0Hi908Kx4eNsMgudg5GLdRD7a84npi+YxNr5i5KIbW5izXas7cHXIMAau1OueZhfj+cOcP3P8MNIWLyYOBuxL6DRylJ4cAAAB4nGNgYoAALjDJyIAOWMCiTIxMLDmZedkABtIBygAAAA==) format('woff')}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#333;overflow:hidden;font-family:"Helvetica Neue",Helvetica,"Segoe UI",Arial,freesans,sans-serif;font-size:16px;line-height:1.6;word-wrap:break-word}.markdown-body strong{font-weight:700}.markdown-body h1{margin:.67em 0}.markdown-body img{border:0}.markdown-body hr{-moz-box-sizing:content-box;box-sizing:content-box}.markdown-body input{color:inherit;margin:0;line-height:normal;font:13px/1.4 Helvetica,arial,freesans,clean,sans-serif,"Segoe UI Emoji","Segoe UI Symbol"}.markdown-body html input[disabled]{cursor:default}.markdown-body input[type=checkbox]{-moz-box-sizing:border-box;box-sizing:border-box;padding:0}.markdown-body *{-moz-box-sizing:border-box;box-sizing:border-box}.markdown-body a{background:0 0;color:#4183c4;text-decoration:none}.markdown-body a:active,.markdown-body a:hover{outline:0;text-decoration:underline}.markdown-body hr:after{clear:both}.markdown-body blockquote{margin:0}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eee}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body .octicon{font:normal normal 16px octicons-anchor;line-height:1;display:inline-block;text-decoration:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-body .octicon-link:before{content:'\f05c'}.markdown-body>:first-child{margin-top:0!important}.markdown-body>:last-child{margin-bottom:0!important}.markdown-body .anchor{position:absolute;top:0;left:0;display:block;padding-right:6px;padding-left:30px;margin-left:-30px}.markdown-body .anchor:focus{outline:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{position:relative;margin-top:1em;margin-bottom:16px;font-weight:700;line-height:1.4}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{display:none;color:#000;vertical-align:middle}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{padding-left:8px;margin-left:-30px;text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{display:inline-block}.markdown-body h1{font-size:2.25em;line-height:1.2}.markdown-body h1 .anchor{line-height:1}.markdown-body h2{font-size:1.75em;line-height:1.225}.markdown-body h2 .anchor{line-height:1}.markdown-body h3{font-size:1.5em;line-height:1.43}.markdown-body h3 .anchor,.markdown-body h4 .anchor{line-height:1.2}.markdown-body h4{font-size:1.25em}.markdown-body h5 .anchor,.markdown-body h6 .anchor{line-height:1.1}.markdown-body h5{font-size:1em}.markdown-body h6{font-size:1em;color:#777}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{overflow:hidden;background:0 0;height:4px;padding:0;margin:16px 0;background-color:#e7e7e7;border:0}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li>p{margin-top:16px}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body blockquote{padding:0 15px;color:#777;border-left:4px solid #ddd}.markdown-body blockquote>:first-child{margin-top:0}.markdown-body blockquote>:last-child{margin-bottom:0}.markdown-body table{border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}.markdown-body table th{font-weight:700}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #ddd}.markdown-body table tr{background-color:#fff;border-top:1px solid #ccc}.markdown-body table tr:nth-child(2n){background-color:#f8f8f8}.markdown-body img{max-width:100%;-moz-box-sizing:border-box;box-sizing:border-box}.markdown-body code{border-radius:3px}.markdown-body .pl-c{color:#969896}.markdown-body .pl-c1,.markdown-body .pl-mdh,.markdown-body .pl-mm,.markdown-body .pl-mp,.markdown-body .pl-mr,.markdown-body .pl-s1 .pl-v,.markdown-body .pl-s3,.markdown-body .pl-sc,.markdown-body .pl-sv{color:#0086b3}.markdown-body .pl-e,.markdown-body .pl-en{color:#795da3}.markdown-body .pl-s1 .pl-s2,.markdown-body .pl-smi,.markdown-body .pl-smp,.markdown-body .pl-stj,.markdown-body .pl-vo,.markdown-body .pl-vpf{color:#333}.markdown-body .pl-ent{color:#63a35c}.markdown-body .pl-k,.markdown-body .pl-s,.markdown-body .pl-st{color:#a71d5d}.markdown-body .pl-pds,.markdown-body .pl-s1,.markdown-body .pl-s1 .pl-pse .pl-s2,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre,.markdown-body .pl-src{color:#df5000}.markdown-body .pl-mo,.markdown-body .pl-v{color:#1d3e81}.markdown-body .pl-id{color:#b52a1d}.markdown-body .pl-ii{background-color:#b52a1d;color:#f8f8f8}.markdown-body .pl-sr .pl-cce{color:#63a35c;font-weight:700}.markdown-body .pl-ml{color:#693a17}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{color:#1d3e81;font-weight:700}.markdown-body .pl-mq{color:teal}.markdown-body .pl-mi{color:#333;font-style:italic}.markdown-body .pl-mb{color:#333;font-weight:700}.markdown-body .pl-md,.markdown-body .pl-mdhf{background-color:#ffecec;color:#bd2c00}.markdown-body .pl-mdht,.markdown-body .pl-mi1{background-color:#eaffea;color:#55a532}.markdown-body .pl-mdr{color:#795da3;font-weight:700}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px Consolas,"Liberation Mono",Menlo,Courier,monospace;line-height:10px;color:#555;vertical-align:middle;background-color:#fcfcfc;border:1px solid #ccc;border-bottom-color:#bbb;border-radius:3px;box-shadow:inset 0 -1px 0 #bbb}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{float:left;margin:.3em 0 .25em -1.6em;vertical-align:middle}.markdown-body :checked+.radio-label{z-index:1;position:relative;border-color:#4183c4}.hljs{display:block;overflow-x:auto;padding:.5em;background:#23241f;-webkit-text-size-adjust:none}.aspectj .hljs-function,.css .hljs-function .hljs-preprocessor,.css .hljs-rules,.css .hljs-value,.hljs,.hljs-pragma,.hljs-tag{color:#f8f8f2}.hljs-emphasis,.hljs-strong,.hljs-strongemphasis{color:#a8a8a2}.alias .hljs-keyword,.hljs-blockquote,.hljs-bullet,.hljs-hexcolor,.hljs-horizontal_rule,.hljs-literal,.hljs-number,.hljs-regexp{color:#ae81ff}.css .hljs-class,.hljs-class .hljs-title:last-child,.hljs-code,.hljs-tag .hljs-value,.hljs-title{color:#a6e22e}.hljs-link_url{font-size:80%}.hljs-strong,.hljs-strongemphasis{font-weight:700}.hljs-class .hljs-title:last-child,.hljs-emphasis,.hljs-strongemphasis,.hljs-typename{font-style:italic}.alias .hljs-keyword:first-child,.css .hljs-important,.css .hljs-tag,.css .unit,.hljs-attribute,.hljs-change,.hljs-flow,.hljs-function,.hljs-header,.hljs-keyword,.hljs-symbol,.hljs-symbol .hljs-string,.hljs-tag .hljs-title,.hljs-value,.hljs-winutils,.nginx .hljs-title,.ruby .hljs-class .hljs-keyword:first-child,.ruby .hljs-function .hljs-keyword,.tex .hljs-special{color:#f92672}.css .hljs-attribute,.hljs-aspect .hljs-keyword:first-child,.hljs-class .hljs-keyword:first-child,.hljs-constant,.hljs-function .hljs-keyword,.hljs-typename{color:#66d9ef}.hljs-aspect .hljs-title,.hljs-class .hljs-title,.hljs-params,.hljs-variable{color:#f8f8f2}.apache .hljs-cbracket,.apache .hljs-tag,.css .hljs-id,.django .hljs-filter .hljs-argument,.django .hljs-template_tag,.django .hljs-variable,.hljs-addition,.hljs-attr_selector,.hljs-built_in,.hljs-envvar,.hljs-link_label,.hljs-link_url,.hljs-prompt,.hljs-pseudo,.hljs-stream,.hljs-string,.hljs-subst,.hljs-type,.ruby .hljs-class .hljs-parent,.smalltalk .hljs-array,.smalltalk .hljs-class,.smalltalk .hljs-localvars,.tex .hljs-command{color:#e6db74}.apache .hljs-sqbracket,.hljs-annotation,.hljs-comment,.hljs-decorator,.hljs-deletion,.hljs-doctype,.hljs-javadoc,.hljs-pi,.hljs-shebang,.tex .hljs-formula{color:#75715e}.coffeescript .javascript,.javascript .xml,.php .xml,.tex .hljs-formula,.xml .css,.xml .hljs-cdata,.xml .javascript,.xml .php,.xml .vbscript{opacity:.5}.markdown-body {min-width: 200px;max-width: 790px;width: auto !important;margin: 0 auto;padding: 30px;}.markdown-body img {max-width: 100%;}</style></head><body><article class="markdown-body"><p><h1 id="installation-instructions">Installation instructions</h1></p>
<p><ul></p>
<p><li><p>Install newest Rasbian Buster Lite  to the Micro SD Card
<a href="https://www.raspberrypi.org/downloads/raspbian/">https://www.raspberrypi.org/downloads/raspbian/</a></p>
</li></p>
<p><li><p>Create an empty file called ssh to the root of the SD card</p></p>
<p><pre><code class="hljs dos"><span class="hljs-built_in">cd</span> PATH_TO_SDCARD_ROOT
touch ssh
</code></pre></li></p>
<p><li><p>ssh to the pi</p></p>
<p><pre><code class="hljs nginx"><span class="hljs-title">ssh</span> pi<span class="hljs-variable">@IP_ADDRESS_OF_THE_PI</span>
</code></pre></li></p>
<p><li>Change the password<pre><code class="hljs nginx"><span class="hljs-title">passwd</span>
raspberry
volumeter
volumeter
</code></pre></li></p>
<p><li>Change the timezone<pre><code class="hljs nginx"><span class="hljs-title">sudo</span> raspi-config
</code></pre></li>
</ul></p>
<p><blockquote></p>
<p>Localisation options</p>
<p>Change Timezone</p>
<p>Europe</p>
<p>Helsinki</p>
</blockquote>
<ul>
<li><p>Change hostname</p>
<pre><code class="hljs vim">sudo nano /etc/<span class="hljs-built_in">hostname</span>
</code></pre><blockquote>
<p>Change from <strong>raspberrypi</strong> to <strong>volumeter</strong></p>
</blockquote>
</li>
<li><p>Upgrade and install packages</p>
<pre><code class="hljs q">sudo apt <span class="hljs-keyword">update</span>
sudo apt upgrade
sudo apt install python3-pip git libatlas-base-<span class="hljs-built_in">dev</span> build-essential tk-<span class="hljs-built_in">dev</span> libncurses5-<span class="hljs-built_in">dev</span> libncursesw5-<span class="hljs-built_in">dev</span> libreadline6-<span class="hljs-built_in">dev</span> libdb5<span class="hljs-number">.3</span>-<span class="hljs-built_in">dev</span> libgdbm-<span class="hljs-built_in">dev</span> libsqlite3-<span class="hljs-built_in">dev</span> libssl-<span class="hljs-built_in">dev</span> libbz2-<span class="hljs-built_in">dev</span> libexpat1-<span class="hljs-built_in">dev</span> liblzma-<span class="hljs-built_in">dev</span> zlib1g-<span class="hljs-built_in">dev</span> libffi-<span class="hljs-built_in">dev</span> libxml2-<span class="hljs-built_in">dev</span> libxslt1-<span class="hljs-built_in">dev</span> -y
</code></pre></li>
<li>Install python 3.8.0<pre><code class="hljs vim">wget http<span class="hljs-variable">s:</span>//www.<span class="hljs-keyword">python</span>.org/ftp/<span class="hljs-keyword">python</span>/<span class="hljs-number">3.8</span>.<span class="hljs-number">0</span>/Python-<span class="hljs-number">3.8</span>.<span class="hljs-number">0</span>.tar.xz
tar xf Python-<span class="hljs-number">3.8</span>.<span class="hljs-number">0</span>.tar.xz
<span class="hljs-keyword">cd</span> Python-<span class="hljs-number">3.8</span>.<span class="hljs-number">0</span>
./configure
<span class="hljs-keyword">make</span> -<span class="hljs-keyword">j</span> <span class="hljs-number">4</span>
sudo <span class="hljs-keyword">make</span> altinstall
</code></pre></li>
<li>Enable w1 temperature sensor<pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;dtoverlay=w1â€“gpio&quot;</span> | sudo tee <span class="hljs-operator">-a</span> /boot/config.txt
sudo reboot
sudo modprobe w1-therm
</code></pre></li>
<li>Install python dependencies<pre><code class="hljs vim">sudo pip3 install virtualenv virtualenvwrapper
<span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;# virtualenv and virtualenvwrapper&quot;</span> &gt;&gt; ~/.<span class="hljs-keyword">profile</span>
<span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;export WORKON_HOME=$HOME/.virtualenvs&quot;</span> &gt;&gt; ~/.<span class="hljs-keyword">profile</span>
<span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;export VIRTUALENVWRAPPER_PYTHON=/usr/bin/python3&quot;</span> &gt;&gt; ~/.<span class="hljs-keyword">profile</span>
<span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;source /usr/local/bin/virtualenvwrapper.sh&quot;</span> &gt;&gt; ~/.<span class="hljs-keyword">profile</span>
<span class="hljs-keyword">source</span> ~/.<span class="hljs-keyword">profile</span>
</code></pre></li>
<li>Create a python virtualenv<pre><code class="hljs stylus">mkvirtualenv volumeter -<span class="hljs-tag">p</span> python3
workon volumeter
</code></pre></li>
<li>Clone the git repository<pre><code class="hljs vim"><span class="hljs-keyword">cd</span> ~
git clone http<span class="hljs-variable">s:</span>//<span class="hljs-keyword">version</span>.aalto.fi/gitlab/pirttij1/dimensiometer.git
<span class="hljs-keyword">cd</span> dimensiometer
pip install -<span class="hljs-keyword">r</span> requirements.txt
pip install git+http<span class="hljs-variable">s:</span>//github.<span class="hljs-keyword">com</span>/ryanlovett/jupyter-tree-download.git
</code></pre></li>
<li>Configuring jupyter<pre><code class="hljs applescript">jupyter notebook <span class="hljs-comment">--generate-config</span>
jupyter notebook password
volumeter
volumeter
</code></pre></li>
<li>Edit jupyter_notebook_config.py<pre><code class="hljs groovy">sudo nano <span class="hljs-regexp">/home/</span>pi<span class="hljs-regexp">/.jupyter/</span>jupyter_notebook_config.py
</code></pre>Change:<pre><code class="hljs stylus"><span class="hljs-id">#c</span><span class="hljs-class">.NotebookApp</span><span class="hljs-class">.ip</span> = <span class="hljs-string">&#39;localhost&#39;</span>
</code></pre>To:<pre><code class="hljs stylus">c<span class="hljs-class">.NotebookApp</span><span class="hljs-class">.ip</span> = <span class="hljs-string">&#39;&#39;</span>
</code></pre></li>
<li>Enable jupyter extensions<pre><code class="hljs brainfuck"><span class="hljs-comment">jupyter</span> <span class="hljs-comment">contrib</span> <span class="hljs-comment">nbextension</span> <span class="hljs-comment">install</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">user</span>
<span class="hljs-comment">jupyter</span> <span class="hljs-comment">nbextension</span> <span class="hljs-comment">enable</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">py</span> <span class="hljs-comment">widgetsnbextension</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">sys</span><span class="hljs-literal">-</span><span class="hljs-comment">prefix</span>
<span class="hljs-comment">jupyter</span> <span class="hljs-comment">serverextension</span> <span class="hljs-comment">enable</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">py</span> <span class="hljs-comment">nbzip</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">sys</span><span class="hljs-literal">-</span><span class="hljs-comment">prefix</span>
<span class="hljs-comment">jupyter</span> <span class="hljs-comment">serverextension</span> <span class="hljs-comment">enable</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">py</span> <span class="hljs-comment">nbzip</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">sys</span><span class="hljs-literal">-</span><span class="hljs-comment">prefix</span>
</code></pre></li>
<li>Start jupyter on boot
Make a file /etc/systemd/system/volumeter.service<pre><code class="hljs puppet">sudo nano /etc/systemd/<span class="hljs-literal">system</span>/volumeter.<span class="hljs-keyword">service</span>
</code></pre>Add the following to the file:<pre><code class="hljs ini"><span class="hljs-title">[Unit]</span>
<span class="hljs-setting">Description=<span class="hljs-value">Volumeter Jupyter Notebook Server</span></span>
<span class="hljs-title">[Service]</span>
<span class="hljs-setting">Type=<span class="hljs-value">simple</span></span>
<span class="hljs-setting">PIDFile=<span class="hljs-value">/run/volumeter.pid</span></span>
<span class="hljs-setting">ExecStart=<span class="hljs-value">/home/pi/dimensiometer/startJupyter.sh</span></span>
<span class="hljs-setting">User=<span class="hljs-value">pi</span></span>
<span class="hljs-setting">WorkingDirectory=<span class="hljs-value">/home/pi/dimensiometer</span></span>
<span class="hljs-title">[Install]</span>
<span class="hljs-setting">WantedBy=<span class="hljs-value">multi-user.target</span></span>
</code></pre></li>
<li>Run the commands<pre><code class="hljs puppet">sudo systemctl <span class="hljs-literal">enable</span> volumeter.<span class="hljs-keyword">service</span>
sudo systemctl daemon-reload
sudo systemctl <span class="hljs-literal">restart</span> volumeter.<span class="hljs-keyword">service</span>
</code></pre>-Extend the life of the Micro SD Card<pre><code class="hljs vim"><span class="hljs-keyword">cd</span> ~
git clone http<span class="hljs-variable">s:</span>//github.<span class="hljs-keyword">com</span>/azlux/log2ram.git
<span class="hljs-keyword">cd</span> log2ram
chmod +<span class="hljs-keyword">x</span> install.<span class="hljs-keyword">sh</span>
sudo ./install.<span class="hljs-keyword">sh</span>
sudo dphys-swapfile swapoff
sudo dphys-swapfile uninstall
sudo <span class="hljs-keyword">update</span>-rc.<span class="hljs-keyword">d</span> dphys-swapfile <span class="hljs-built_in">remove</span>
</code></pre></li>
<li>Configuring Juice4halt UPS
Download shutdown_script.sh and rebootj4h.sh from: <a href="https://juice4halt.com/download">https://juice4halt.com/download</a>
and put them to <strong>/home/pi/juice4halt/bin/</strong></li>
</ul>
<pre><code class="hljs perl"><span class="hljs-keyword">mkdir</span> /home/pi/juice4halt/
<span class="hljs-keyword">mkdir</span> /home/pi/juice4halt/bin/
sudo <span class="hljs-keyword">chmod</span> <span class="hljs-number">755</span> shutdown_script
sudo <span class="hljs-keyword">chmod</span> <span class="hljs-number">755</span> rebootj4h
</code></pre><p>Edit <strong>/etc/rc.local</strong>
and add the following line before the line <strong>exit 0</strong></p>
<pre><code class="hljs groovy"><span class="hljs-regexp">/home/</span>pi<span class="hljs-regexp">/juice4halt/</span>bin/shutdown_script &amp;
</code></pre><ul>
<li>Configuring hardware RTC in the Juice4halt UPS</li>
</ul>
<p><a href="https://cdn-learn.adafruit.com/downloads/pdf/adding-a-real-time-clock-to-raspberry-pi.pdf">https://cdn-learn.adafruit.com/downloads/pdf/adding-a-real-time-clock-to-raspberry-pi.pdf</a></p>
<pre><code class="hljs nginx"><span class="hljs-title">sudo</span> raspi-config
</code></pre><blockquote>
<p>Interfacing options</p>
<p>I2C</p>
<p>Yes</p>
<p>Ok</p>
<p>Finish</p>
</blockquote>
<pre><code class="hljs vim">sudo apt-<span class="hljs-built_in">get</span> install <span class="hljs-keyword">python</span>-smbus i2c-tools
sudo i2cdetect -<span class="hljs-keyword">y</span> <span class="hljs-number">1</span>
</code></pre><p>Check that address 51 is detected</p>
<p>Edit /boot/config.txt. Add <strong>dtoverlay=i2c-rtc,pcf8563</strong> to the last line. Save and reboot by running the juice4halt reboot script.</p>
<pre><code class="hljs groovy">sudo nano <span class="hljs-regexp">/boot/</span>config.txt
sudo <span class="hljs-regexp">/home/</span>pi<span class="hljs-regexp">/juice4halt/</span>bin/rebootj4h
</code></pre><p>Use <strong>sudo i2cdetect -y 1</strong> to check that the address 51 now shows UU.</p>
<p>Disable fake hw clock</p>
<pre><code class="hljs vim">sudo apt-<span class="hljs-built_in">get</span> -<span class="hljs-keyword">y</span> <span class="hljs-built_in">remove</span> fake-hwclock
sudo <span class="hljs-keyword">update</span>-rc.<span class="hljs-keyword">d</span> -<span class="hljs-keyword">f</span> fake-hwclock <span class="hljs-built_in">remove</span>
sudo systemctl disable fake-hwclock
</code></pre><p>Run <strong>sudo nano /lib/udev/hwclock-set</strong> and comment out these three lines:</p>
<pre><code class="hljs vala"><span class="hljs-preprocessor">#if [ -e /run/systemd/system ] ;then</span>
<span class="hljs-preprocessor"># exit 0</span>
<span class="hljs-preprocessor">#fi</span>
</code></pre><p>Also comment out the two lines</p>
<pre><code class="hljs brainfuck"><span class="hljs-comment">/sbin/hwclock</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">rtc=$dev</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">systz</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">badyear</span>
</code></pre><p>and</p>
<pre><code class="hljs brainfuck"><span class="hljs-comment">/sbin/hwclock</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">rtc=$dev</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">systz</span>
</code></pre><p>Sync time to the hardware RTC</p>
<p>Check that the current system time is correct with the <strong>date</strong> command</p>
<p>Run <strong>sudo hwclock -w</strong> to write the time to the RTC</p>
<p>Check the time with <strong>sudo hwclock -r</strong></p>
</article></body></html>